var upstreamSSO="https://sso-uat.iitb.ac.in";

function addScript(i,t){var s=document.createElement("script");s.setAttribute("src",i),s.onload=t,document.body.appendChild(s)}function SSO_JS(i){"use strict";this.iframe_base_url="//gymkhana.iitb.ac.in/sso/widget/login/?",this.iframe=null,this.config=i.config||{},this.config_keys=["client_id","response_type","redirect_uri","scope","state"],this.colors=i.colors||{},this.color_keys=["button_div_bg_color","button_anchor_color","logout_anchor_color"],this.init=function(){return this._setupMessageListener(),this._render()},this.render=function(){return console.warn("render() function will be removed in future versions. Use init() instead"),this.init()},this._render=function(){this._applyDefaults(this.config),this._scopeListToString(),this._verify(),this._verifyColors();var i="https://gymkhana.iitb.ac.in/profiles/oauth/authorize/?"+this._dictsToQueryParam([[this.config_keys,this.config]]),t={width:"100%",background:"#"+(this.colors.button_div_bg_color||"140396"),foreground:"#"+(this.colors.button_anchor_color||"FFFFFF"),switchForeground:"#"+(this.colors.logout_anchor_color||"000000"),cornerRadius:"25px",padding:"12px 25px",fontWeight:"normal",fontFamily:"sans-serif",fontVariant:"small-caps",fontWeight:"bold"};return addScript(upstreamSSO+"/assets/widget.js",()=>{buildSSOWidget(upstreamSSO,this.config.sso_root.id,i,t)}),this},this._verifyColors=function(){var i=/^(?:[0-9a-fA-F]{3}){1,2}$/;this.color_keys.map(function(t){if(this.colors.hasOwnProperty(t)&&!i.test(this.colors[t]))throw new Error("Color "+t+" must be a valid HEX with #")}.bind(this))},this._applyDefaults=function(i){this.config.response_type=this.config.hasOwnProperty("response_type")?i.response_type:"code",this.config.scope=this.config.hasOwnProperty("scope")?i.scope:["basic"],this.config.new_window=this.config.hasOwnProperty("new_window")?i.new_window:"false",this.config.sso_root=this.config.hasOwnProperty("sso_root")?i.sso_root:document.getElementById("sso-root")},this._scopeListToString=function(){this.config.scope=this.config.scope.join(" ")},this._verify=function(){if(!this.config.hasOwnProperty("client_id"))throw new Error("client_id is not provided")},this._dictsToQueryParam=function(i){var t=[];return i.map(function(i){i[0].map(function(s){i[1].hasOwnProperty(s)&&t.push(s+"="+i[1][s])})}),t.join("&")},this._setupMessageListener=function(){var i=window.addEventListener?"addEventListener":"attachEvent";(0,window[i])("attachEvent"==i?"onmessage":"message",function(i){if(null!=this.iframe&&null!=this.iframe&&0==this.iframe.src.indexOf(i.origin)){var t=i.data;this._parseMessage(t)}}.bind(this),!1)},this._parseMessage=function(i){var t=i.split("://");if("sso-iframe"==t[0]){var s=t[1].split(":");this._resizeIFrame(s[0],s[1])}},this._resizeIFrame=function(i,t){this.iframe.height=i+"px",this.iframe.width=t+"px"}}var sso_root=new SSO_JS({});
