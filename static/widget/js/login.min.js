var upstreamSSO="https://sso.iitb.ac.in"; // https://sso.iitb.ac.in;

function addScript(t,i){var s=document.createElement("script");s.setAttribute("src",t),s.onload=i,document.body.appendChild(s)}function SSO_JS(t){"use strict";this.iframe_base_url="//gymkhana.iitb.ac.in/sso/widget/login/?",this.iframe=null,this.config=t.config||{},this.config_keys=["client_id","response_type","redirect_uri","scope","state"],this.colors=t.colors||{},this.color_keys=["button_div_bg_color","button_anchor_color","logout_anchor_color"],this.init=function(){return this._setupMessageListener(),this._render()},this.render=function(){return console.warn("render() function will be removed in future versions. Use init() instead"),this.init()},this._render=function(){if(this._applyDefaults(this.config),this._scopeListToString(),this._verify(),this._verifyColors(),upstreamSSO){var t=this._dictsToQueryParam([[this.config_keys,this.config]]),i="https://gymkhana.iitb.ac.in/profiles/user/redir?logout="+encodeURIComponent("https://gymkhana.iitb.ac.in/profiles/oauth/authorize/?"+t),s={width:"100%",background:"#"+(this.colors.button_div_bg_color||"140396"),foreground:"#"+(this.colors.button_anchor_color||"FFFFFF"),switchForeground:"#"+(this.colors.logout_anchor_color||"000000"),cornerRadius:"25px",padding:"12px 25px",fontWeight:"normal",fontFamily:"sans-serif",fontVariant:"small-caps",fontWeight:"bold"};addScript(upstreamSSO+"/assets/widget.js",()=>{buildSSOWidget(upstreamSSO,this.config.sso_root.id,i,s)})}else{t=this._dictsToQueryParam([[this.config_keys,this.config],[this.color_keys,this.colors]]);var e=this.iframe_base_url+t;this.iframe=document.createElement("iframe"),this.iframe.setAttribute("id","sso-iframe"),this.iframe.setAttribute("src",e),this.iframe.setAttribute("frameBorder","0"),this.iframe.setAttribute("scrolling","No"),this.iframe.setAttribute("height","70px"),this.iframe.setAttribute("width","200px"),this.config.sso_root.appendChild(this.iframe)}return this},this._verifyColors=function(){var t=/^(?:[0-9a-fA-F]{3}){1,2}$/;this.color_keys.map(function(i){if(this.colors.hasOwnProperty(i)&&!t.test(this.colors[i]))throw new Error("Color "+i+" must be a valid HEX with #")}.bind(this))},this._applyDefaults=function(t){this.config.response_type=this.config.hasOwnProperty("response_type")?t.response_type:"code",this.config.scope=this.config.hasOwnProperty("scope")?t.scope:["basic"],this.config.new_window=this.config.hasOwnProperty("new_window")?t.new_window:"false",this.config.sso_root=this.config.hasOwnProperty("sso_root")?t.sso_root:document.getElementById("sso-root")},this._scopeListToString=function(){this.config.scope=this.config.scope.join(" ")},this._verify=function(){if(!this.config.hasOwnProperty("client_id"))throw new Error("client_id is not provided")},this._dictsToQueryParam=function(t){var i=[];return t.map(function(t){t[0].map(function(s){t[1].hasOwnProperty(s)&&i.push(s+"="+t[1][s])})}),i.join("&")},this._setupMessageListener=function(){var t=window.addEventListener?"addEventListener":"attachEvent";(0,window[t])("attachEvent"==t?"onmessage":"message",function(t){if(null!=this.iframe&&null!=this.iframe&&0==this.iframe.src.indexOf(t.origin)){var i=t.data;this._parseMessage(i)}}.bind(this),!1)},this._parseMessage=function(t){var i=t.split("://");if("sso-iframe"==i[0]){var s=i[1].split(":");this._resizeIFrame(s[0],s[1])}},this._resizeIFrame=function(t,i){this.iframe.height=t+"px",this.iframe.width=i+"px"}}var sso_root=new SSO_JS({});
